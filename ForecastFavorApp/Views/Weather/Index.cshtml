@model ForecastFavorLib.Models.CurrentWeatherResponse

@{
    ViewData["Title"] = "Current Weather";
}

<div class="container mt-5">

    <!-- Search Bar -->
    <div class="search-container">
        <input class="search-input" type="text" placeholder="Search by city">
        <button class="search-button">Go</button>
    </div>

    <!-- Current Location -->
    <div class="current-location">
        <p>Current Location: Sudbury, Canada</p>
        <!-- Button to allow the user to fetch the latest weather data -->
        <button id="fetchWeatherButton" class="btn btn-success btn-lg mt-3 fetch-button">Fetch Weather</button>
    </div>

    <!-- Current Weather Card -->
    <div class="card border-primary mb-3 current-weather">
        <div class="card-body text-center">
            <!-- Display city and country in the card title -->
            <h3 class="card-title mb-4">@Model.Location.Name, @Model.Location.Country</h3>
            <!-- Weather Icon/Image -->
            <img class="weather-icon" src="/images/cloudy.png" alt="Weather Icon">
            <!-- Weather Details on Left -->
            <div class="weather-details-left">
                <p class="card-text"><strong>Temperature:</strong> <i class="fas fa-temperature-low"></i> @Model.Current.TemperatureC 째C (@Model.Current.TemperatureF 째F)</p>
                <p class="card-text"><strong>Condition:</strong> <i class="fa fa-cloud"></i> @(Model.Current.Condition?.Text ?? "Not available")</p>
                <p class="card-text"><strong>Pressure:</strong> @Model.Current.PressureIn inches</p>
                <p class="card-text"><strong>Humidity:</strong> <i class="fa fa-droplet"></i> @Model.Current.Humidity %</p>
            </div>
            <!-- Weather Details on Right -->
            <div class="weather-details-right">
                <p class="card-text"><strong>Cloud Cover:</strong> <i class="fa fa-cloud"></i> @Model.Current.Cloud %</p>
                <p class="card-text"><strong>Feels Like:</strong>@Model.Current.FeelsLikeC 째C</p>
                <p class="card-text"><strong>Wind Speed: </strong> <i class="fa fa-wind"></i> @Model.Current.WindKph kph</p>
            </div>
        </div>
    </div>


    <!-- Hourly Forecast Container -->
    <div class="hourly-forecast">
        <!-- Hourly Forecast Content -->
        <div class="hourly-forecast-item">
            <p class="temperature">25째C</p>
            <img class="weather-icon" src="/images/partly-cloudy.png" alt="Weather Icon">
            <p class="weather-description">Partly Cloudy</p>
            <p class="hourly-time">1 PM</p>
        </div>
    </div>

</div>

<script>
    document.getElementById("fetchWeatherButton").addEventListener("click", function () {
        // Send a request to the Index action method
        fetch("/Weather/Index")
            .then(response => {
                if (response.ok) {
                    // Handle a successful response
                } else {
                    // Handle error response
                }
            })
            .catch(error => {
                console.error("Error fetching weather data:", error);
            });
    });
</script>
