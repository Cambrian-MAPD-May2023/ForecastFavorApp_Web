@* Specify the model type this view *@
@model ForecastFavorLib.Models.ForecastDay

@{
    // Set the page title to be used in the layout for the <title> tag
    ViewData["Title"] = "Weather Forecast for Tomorrow";
}
@*Heading for the forecast of the next day*@
<h2>Weather Forecast for Tomorrow</h2>

@*Check if the Model and the Day properties are not null to avoid null reference exceptions*@
@if (Model != null && Model.Day != null)
{
    // Begin a division to display the weather details
    <div class="card border-primary mb-3">
        <div class="card-body text-center">
            <p><strong>Max Temperature:</strong> <i class="fa fa-temperature-empty"></i> @Model.Day.MaxTempC °C</p>
            <p><strong>Min Temperature:</strong> <i class="fa fa-cloud"></i> @Model.Day.MinTempC °C</p>
            <p><strong>Average Temperature:</strong> @Model.Day.AvgTempC °C</p>
            <p><strong>Condition:</strong> @Model.Day.Condition.Text</p>
            <p><strong>Max Wind Speed:</strong> @Model.Day.MaxWindKph kph</p>
            <p><strong>Total Precipitation:</strong> @Model.Day.TotalPrecipIn inches</p>
            <p><strong>Total Snow:</strong> @Model.Day.TotalSnowCm cm</p>
            <p><strong>Average Humidity:</strong> @Model.Day.AvgHumidity %</p>
            <p><strong>Chance of Rain:</strong> @Model.Day.DailyChanceOfRain %</p>
            <p><strong>Chance of Snow:</strong> @Model.Day.DailyChanceOfSnow %</p>
            <button id="readTomorrowForecastButton" class="btn btn-info btn-lg mt-3">Read Forecast Aloud</button>
        </div>
    </div>

}
else
{
// Display a message if the forecast data for tomorrow is unavailable
<p>Forecast data for tomorrow is not available at the moment.</p>
}

<script>
    document.getElementById("readTomorrowForecastButton").addEventListener("click", function () {
        // Extracting model data into JavaScript variables
        var maxTempC = '@Model.Day.MaxTempC';
        var conditionText = '@Model.Day.Condition.Text';

        // Construct the forecast text to be read
        var forecastText = `The maximum temperature tomorrow will be ${maxTempC} degrees Celsius. 
                            The condition is expected to be ${conditionText}.`;

        // Call the speak function 
        speak(forecastText);
    });

    function speak(text) {
        const speech = new SpeechSynthesisUtterance();
        speech.text = text;
        speech.lang = 'en-US'; 
        speech.pitch = 1;
        speech.rate = 1;
        window.speechSynthesis.speak(speech);
    }
</script>

